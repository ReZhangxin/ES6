<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>防抖</title>
    <style>
        #container {
            width: 100%;
            height: 200px;
            line-height: 200px;
            text-align: center;
            color: #fff;
            background-color: #444;
            font-size: 30px;
        }
    </style>
</head>

<body>
    <div id="container"></div>
    <script>
        let count = 1;
        const container = document.getElementById('container');

        function getUserAction(e) {
            container.innerHTML = count++;
            
            console.log(this);
            console.table(e);
            
        }
        //防抖
        // container.onmousemove = debounce(getUserAction,1000);
        // function debounce(func,wait){
        //     let timeout;   
        //     return function(){
        //         const that = this;
        //         const args = arguments;
        //         clearTimeout(timeout);
        //         timeout = setTimeout(function(){
        //             func.apply(that,args);
        //         },wait);
        //     }
        // }
        
        //节流
        container.onmousemove = throttle(getUserAction,1000);
        //使用时间戳
    //    function throttle(func,wait){
    //        let that,args;
    //        let previous = 0;

    //        return function(){
    //            var now = +new Date();
    //            that =this;
    //            args =arguments;
    //            if(now - previous > wait){
    //                func.apply(that,args);
    //                previous = now;
    //            }

    //        }
    //    }
        //使用定时器
        function throttle(func,wait){
            let timeout;
            let previous = 0;

            return function(){
                that = this;
                args = arguments;
                if(!timeout){
                    timeout = setTimeout(function(){
                        timeout = null;
                        func.apply(that,args)
                    },wait)
                }
            }
        }

    </script>
</body>

</html>